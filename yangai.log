werkzeug - 2024-04-15 20:58:00,250 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 20:58:00,251 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 20:58:02,829 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:02] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-15 20:58:11,866 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,900 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 20:58:11,901 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,933 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_15_0m1708700751.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,934 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,942 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,965 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,965 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 20:58:11,975 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_15_0m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,977 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,985 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,990 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_16m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:11,992 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:11] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_9m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:12,756 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:12] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:12,806 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:12] "GET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:13,059 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:13] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:13,206 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 20:58:15,520 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:15] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-15 20:58:16,515 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 377, in update_output
    ai.chat(prompt_start)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 160, in chat
    logger.info("Model Conversation {}".format(self.conv))
AttributeError: module 'logger.logger' has no attribute 'info'
werkzeug - 2024-04-15 20:58:16,523 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:16] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 20:58:19,140 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 377, in update_output
    ai.chat(prompt_start)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 160, in chat
    logger.info("Model Conversation {}".format(self.conv))
AttributeError: module 'logger.logger' has no attribute 'info'
werkzeug - 2024-04-15 20:58:19,147 - INFO - 127.0.0.1 - - [15/Apr/2024 20:58:19] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 20:59:54,296 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 20:59:54,297 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 21:00:03,890 - INFO - 127.0.0.1 - - [15/Apr/2024 21:00:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:00:03,914 - INFO - 127.0.0.1 - - [15/Apr/2024 21:00:03] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:00:03,959 - INFO - 127.0.0.1 - - [15/Apr/2024 21:00:03] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:00:47,349 - INFO - 127.0.0.1 - - [15/Apr/2024 21:00:47] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:01:19,636 - INFO - 127.0.0.1 - - [15/Apr/2024 21:01:19] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:01:30,516 - INFO - 127.0.0.1 - - [15/Apr/2024 21:01:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:02:15,678 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:15] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-15 21:02:15,696 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
    button_id = ctx.triggered[0]['prop_id'].split('.')[0]
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:15,715 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:15] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:02:18,256 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
    button_id = ctx.triggered[0]['prop_id'].split('.')[0]
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:18,259 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:18] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:02:19,282 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
    button_id = ctx.triggered[0]['prop_id'].split('.')[0]
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:19,288 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:19] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:02:19,752 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
    button_id = ctx.triggered[0]['prop_id'].split('.')[0]
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:19,756 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:19] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:02:21,410 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
    button_id = ctx.triggered[0]['prop_id'].split('.')[0]
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:21,412 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:21] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:02:48,837 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:48,842 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:48] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:02:52,323 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-15 21:02:52,345 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:02:52,348 - INFO - 127.0.0.1 - - [15/Apr/2024 21:02:52] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:03:01,853 - INFO - 127.0.0.1 - - [15/Apr/2024 21:03:01] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-15 21:03:01,880 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:03:01,883 - INFO - 127.0.0.1 - - [15/Apr/2024 21:03:01] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:03:03,483 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 520, in dynamic_history_action
NameError: name 'json' is not defined
werkzeug - 2024-04-15 21:03:03,487 - INFO - 127.0.0.1 - - [15/Apr/2024 21:03:03] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:03:09,850 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:03:09,851 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 21:04:03,294 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:04:03,294 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 21:04:10,048 - INFO - 127.0.0.1 - - [15/Apr/2024 21:04:10] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:04:26,915 - INFO - 127.0.0.1 - - [15/Apr/2024 21:04:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,436 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:05:31,438 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:05:31,520 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,539 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,563 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,580 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,587 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:31,591 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:31] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:39,506 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:05:43,090 - INFO - 127.0.0.1 - - [15/Apr/2024 21:05:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:11:41,363 - INFO - 127.0.0.1 - - [15/Apr/2024 21:11:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:11:58,120 - INFO - 127.0.0.1 - - [15/Apr/2024 21:11:58] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:12:00,981 - INFO - 127.0.0.1 - - [15/Apr/2024 21:12:00] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:14:55,968 - INFO - 127.0.0.1 - - [15/Apr/2024 21:14:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:41:27,543 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:41:27,544 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 21:41:49,776 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:41:49,776 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 21:41:51,552 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:51] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-15 21:41:58,410 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:41:58,492 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:58,495 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:58,498 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:58,981 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:41:58,984 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:58] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:59,002 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:59,015 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:59,017 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:59,089 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:41:59,362 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:41:59,407 - INFO - 127.0.0.1 - - [15/Apr/2024 21:41:59] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:42:01,747 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:01] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:42:05,819 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 21:42:05,844 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:05] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:42:05,912 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:05] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:42:05,913 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:05] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 21:42:05,953 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:05] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-15 21:42:10,586 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
NameError: name 'Sentence' is not defined
werkzeug - 2024-04-15 21:42:10,592 - INFO - 127.0.0.1 - - [15/Apr/2024 21:42:10] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:43:03,824 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:43:03,824 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:43:07,692 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Sentence' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:43:07,703 - INFO - 127.0.0.1 - - [15/Apr/2024 21:43:07] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:44:49,975 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:44:49,976 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:44:52,542 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Conversation' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:44:52,555 - INFO - 127.0.0.1 - - [15/Apr/2024 21:44:52] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:44:54,592 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:44:54,595 - INFO - 127.0.0.1 - - [15/Apr/2024 21:44:54] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:45:06,690 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:45:06,691 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:45:12,812 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Conversation' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:45:12,822 - INFO - 127.0.0.1 - - [15/Apr/2024 21:45:12] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:45:56,596 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:45:56,597 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:45:58,529 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Conversation' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:45:58,558 - INFO - 127.0.0.1 - - [15/Apr/2024 21:45:58] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:45:59,738 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:45:59,739 - INFO - 127.0.0.1 - - [15/Apr/2024 21:45:59] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:46:35,640 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:46:35,640 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:47:39,824 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Conversation' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Sentence->sentence, expression 'Conversation' failed to locate a name ("name 'Conversation' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.sentence.Sentence'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:47:39,833 - INFO - 127.0.0.1 - - [15/Apr/2024 21:47:39] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:48:23,182 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:48:23,182 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:48:25,987 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 425, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 44, in create_conversation
    new_conversation.sentences.append(sentence)
AttributeError: 'Conversation' object has no attribute 'sentences'
werkzeug - 2024-04-15 21:48:26,000 - INFO - 127.0.0.1 - - [15/Apr/2024 21:48:26] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:52:46,376 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:52:46,376 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:52:53,222 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Sentence' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:52:53,235 - INFO - 127.0.0.1 - - [15/Apr/2024 21:52:53] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 21:57:27,164 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 21:57:27,165 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 21:57:27,531 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 294, in __call__
    x = eval(self.arg, globals(), self._dict)
  File "<string>", line 1, in <module>
NameError: name 'Sentence' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1914, in do_init
    self._process_dependent_arguments()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1976, in _process_dependent_arguments
    self.target = self.entity.persist_selectable
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1881, in entity
    argument = self.argument()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/ext/declarative/clsregistry.py", line 301, in __call__
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:57:27,544 - INFO - 127.0.0.1 - - [15/Apr/2024 21:57:27] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:57:28,762 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:57:28,764 - INFO - 127.0.0.1 - - [15/Apr/2024 21:57:28] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:57:29,361 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:57:29,364 - INFO - 127.0.0.1 - - [15/Apr/2024 21:57:29] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:57:30,002 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:57:30,005 - INFO - 127.0.0.1 - - [15/Apr/2024 21:57:30] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 21:57:30,735 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: When initializing mapper mapped class Conversation->conversation, expression 'Sentence' failed to locate a name ("name 'Sentence' is not defined"). If this is a class name, consider adding this relationship() to the <class 'ai.model.conversation.Conversation'> class after both dependent classes have been defined.
werkzeug - 2024-04-15 21:57:30,737 - INFO - 127.0.0.1 - - [15/Apr/2024 21:57:30] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 22:01:20,484 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:01:20,485 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 22:01:27,061 - INFO - 127.0.0.1 - - [15/Apr/2024 22:01:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-15 22:01:29,337 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1918, in do_init
    self._generate_backref()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 2148, in _generate_backref
    raise sa_exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:01:29,347 - INFO - 127.0.0.1 - - [15/Apr/2024 22:01:29] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 22:04:32,144 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:04:32,145 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 22:04:34,254 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 2043, in get_property
    return self._props[key]
KeyError: 'sentences'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1918, in do_init
    self._generate_backref()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 2203, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1849, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 2045, in get_property
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:34,276 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:34] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:35,367 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:35,368 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:35] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:36,097 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:36,099 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:36] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:37,422 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:37,424 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:37] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:38,192 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:38,194 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:38] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:38,524 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:38,525 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:38] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:38,684 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:38,685 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:38] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:04:39,030 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Sentence->sentence'. Original exception was: Mapper 'mapped class Conversation->conversation' has no property 'sentences'
werkzeug - 2024-04-15 22:04:39,031 - INFO - 127.0.0.1 - - [15/Apr/2024 22:04:39] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 22:10:11,291 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:10:11,292 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-15 22:10:14,858 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3249, in configure_mappers
    mapper._post_configure_properties()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 1947, in _post_configure_properties
    prop.init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/interfaces.py", line 196, in init
    self.do_init()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 1918, in do_init
    self._generate_backref()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/relationships.py", line 2148, in _generate_backref
    raise sa_exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:14,879 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:15,628 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:15,630 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:15] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:16,843 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:16,845 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:16] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:19,666 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:19,668 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:19] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:20,215 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:20,217 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:20] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:20,687 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:20,689 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:20] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:21,261 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:21,262 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:21] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-15 22:10:22,452 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1310, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 442, in add_context
    output_value = func(*func_args, **func_kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 423, in update_output
    cm.add_sentence(from_user= sentence_from_user, text=sentence_text)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 52, in add_sentence
    sentence = Sentence(from_user=from_user, text=text, type=type, model=model, notes=notes)
  File "<string>", line 2, in __init__
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 376, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 855, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/instrumentation.py", line 202, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/event/attr.py", line 322, in __call__
    fn(*args, **kw)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3361, in _event_on_first_init
    configure_mappers()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/mapper.py", line 3245, in configure_mappers
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'mapped class Conversation->conversation'. Original exception was: Error creating backref 'conversation' on relationship 'Conversation.sentences': property of that name exists on mapper 'mapped class Sentence->sentence'
werkzeug - 2024-04-15 22:10:22,454 - INFO - 127.0.0.1 - - [15/Apr/2024 22:10:22] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-15 22:12:36,611 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:12:36,611 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 22:12:50,493 - INFO - 127.0.0.1 - - [15/Apr/2024 22:12:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:11,479 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:11] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:11,641 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:11] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:11,644 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:11] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:11,647 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:11] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,022 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,027 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,038 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,038 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,048 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:12,209 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-15 22:26:12,520 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:12,557 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:13,544 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:14,426 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:26:16,480 - INFO - 127.0.0.1 - - [15/Apr/2024 22:26:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-15 22:28:32,481 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:28:32,481 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-15 22:29:12,728 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-15 22:29:12,729 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-20 22:41:25,516 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-20 22:41:25,517 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 11:27:50,367 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 11:27:50,367 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 11:27:55,284 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:55] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-21 11:27:59,023 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,033 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,034 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 11:27:59,090 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_15_0m1708700751.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,094 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,103 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_15_0m1708700751.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,104 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,107 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,107 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/prop-types@15.v2_15_0m1708700751.8.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,111 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,113 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 11:27:59,115 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_15_0m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,118 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,124 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,133 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_9m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,133 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_16m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,197 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,198 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_15_0m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,198 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_15_0m1708700751.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,198 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,199 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,200 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_0m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,202 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_9m1708700751.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,203 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_16m1708700751.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:27:59,802 - INFO - 127.0.0.1 - - [21/Apr/2024 11:27:59] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:00,123 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:00] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:00,255 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:00] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:02,922 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:07,877 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:07] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:08,319 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:08,345 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:08] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:08,354 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:08] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:08,369 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:08] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:08,498 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:08] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:12,867 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:14,953 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:24,720 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:24] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 11:28:24,728 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:24] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 11:28:25,025 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:25,029 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:25,031 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:25,047 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:25,051 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 11:28:25,110 - INFO - 127.0.0.1 - - [21/Apr/2024 11:28:25] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1" 200 -
sqlalchemy.pool.impl.QueuePool - 2024-04-21 12:01:42,171 - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 538, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

sqlalchemy.pool.impl.QueuePool - 2024-04-21 12:01:42,180 - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 538, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

werkzeug - 2024-04-21 12:08:53,333 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:08:53,333 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:08:55,966 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:55] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,266 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:08:56,280 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_16_1m1713672115.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,286 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:08:56,332 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,339 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/prop-types@15.v2_16_1m1713672115.8.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,342 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,344 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_16_1m1713672114.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,345 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/feffery_antd_components/feffery_antd_components.v0_2_11m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,347 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,365 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,369 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_17m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,385 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:08:56,390 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_10m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,475 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_16_1m1713672115.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,478 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,483 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,484 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/deps/prop-types@15.v2_16_1m1713672115.8.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,497 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_16_1m1713672114.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,499 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_17m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,503 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,508 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,509 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:08:56,509 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_10m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:56,994 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,000 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:56] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,004 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:08:57,009 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,011 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "GET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,291 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "GET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,417 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,427 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "GET /ai/_dash-component-suites/feffery_antd_components/async-data_display.v0_2_11m1699104383.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:08:57,473 - INFO - 127.0.0.1 - - [21/Apr/2024 12:08:57] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:00,887 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:00] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:04,209 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:04] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,104 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,169 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,197 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,201 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,239 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:06,982 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:12,849 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:27,064 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:09:27,064 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:09:28,966 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:28] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:29,172 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,174 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,176 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,684 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,694 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,697 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,698 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,699 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:29,809 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:09:29,895 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:29,980 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:29] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:09:32,515 - INFO - 127.0.0.1 - - [21/Apr/2024 12:09:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:11:50,090 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:11:50,090 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:11:52,601 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:52] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:11:52,700 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:52] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:52,701 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:52] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:52,702 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:52] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,132 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,139 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,143 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,147 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,176 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:11:53,313 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:11:53,396 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:11:53,463 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:53] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:11:55,405 - INFO - 127.0.0.1 - - [21/Apr/2024 12:11:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:15:50,396 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:15:50,823 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:15:50,853 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:15:50,892 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:15:50,894 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:15:50,913 - INFO - 127.0.0.1 - - [21/Apr/2024 12:15:50] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:17:13,124 - INFO - 127.0.0.1 - - [21/Apr/2024 12:17:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:17:16,826 - INFO - 127.0.0.1 - - [21/Apr/2024 12:17:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:17:22,057 - INFO - 127.0.0.1 - - [21/Apr/2024 12:17:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:17:22,420 - INFO - 127.0.0.1 - - [21/Apr/2024 12:17:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:17:51,356 - INFO - 127.0.0.1 - - [21/Apr/2024 12:17:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:22:32,787 - INFO - 127.0.0.1 - - [21/Apr/2024 12:22:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:22:33,880 - INFO - 127.0.0.1 - - [21/Apr/2024 12:22:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:23:06,643 - INFO - 127.0.0.1 - - [21/Apr/2024 12:23:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:24:50,924 - INFO - 127.0.0.1 - - [21/Apr/2024 12:24:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:28:05,819 - INFO - 127.0.0.1 - - [21/Apr/2024 12:28:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:28:08,729 - INFO - 127.0.0.1 - - [21/Apr/2024 12:28:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:35:44,598 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:35:44,598 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 12:35:47,345 - ERROR - Exception on /ai/ [GET]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 868, in full_dispatch_request
    rv = self.preprocess_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1243, in preprocess_request
    rv = self.ensure_sync(before_func)()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1391, in _setup_server
    _validate.validate_layout(self.layout, self._layout_value())
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_validate.py", line 427, in validate_layout
    raise exceptions.DuplicateIdError(
dash.exceptions.DuplicateIdError: Duplicate component id found in the initial layout: `history_modal_view`
werkzeug - 2024-04-21 12:35:47,351 - INFO - 127.0.0.1 - - [21/Apr/2024 12:35:47] "[35m[1mGET /ai/ HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 12:36:10,664 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:36:10,664 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:36:12,980 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:12] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:36:13,205 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,205 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,206 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,601 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,608 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,609 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,616 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:36:13,617 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,744 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:36:13,867 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:36:13,921 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:36:16,501 - INFO - 127.0.0.1 - - [21/Apr/2024 12:36:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:37:12,890 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:37:12,893 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:37:12,911 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:37:12,911 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:37:12,911 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:37:12,913 - INFO - 127.0.0.1 - - [21/Apr/2024 12:37:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:23,740 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:39:23,740 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:39:25,741 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:25] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:39:25,847 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:25] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:25,883 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:25] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:25,884 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:25] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,326 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,336 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:39:26,346 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,350 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,356 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,471 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:39:26,549 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:39:26,598 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:39:28,425 - INFO - 127.0.0.1 - - [21/Apr/2024 12:39:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:40:16,351 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:40:16,351 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:40:17,863 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:17] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:40:17,964 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:17] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:17,968 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:17] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:17,981 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:17] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,445 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,454 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,459 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,460 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:40:18,461 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,579 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:40:18,665 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:40:18,697 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:18] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:40:20,594 - INFO - 127.0.0.1 - - [21/Apr/2024 12:40:20] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:43:14,683 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:43:14,683 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:43:16,897 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:16] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:43:16,941 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:16] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:16,950 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:16] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:16,952 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:16] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,515 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:43:17,515 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,523 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,528 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,530 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,631 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:43:17,730 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:43:17,768 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:43:19,572 - INFO - 127.0.0.1 - - [21/Apr/2024 12:43:19] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:45:16,291 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:45:16,291 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:45:17,582 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:17] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:45:17,675 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:17] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:17,676 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:17] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:17,677 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:17] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,295 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,309 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,324 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,325 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,332 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:45:18,450 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:45:18,524 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:45:18,549 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:18] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:45:20,514 - INFO - 127.0.0.1 - - [21/Apr/2024 12:45:20] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:46:23,252 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:46:23,252 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:46:24,151 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:46:24,317 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,321 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,330 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,728 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,734 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,737 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,737 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,749 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:46:24,860 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:46:24,952 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:46:24,996 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:24] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:46:27,271 - INFO - 127.0.0.1 - - [21/Apr/2024 12:46:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:29,224 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 12:47:29,224 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 12:47:30,348 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:30] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:30,403 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:30] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:30,407 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:30] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:30,407 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:30] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:35,658 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:35] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:35,743 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:35] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:35,748 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:35] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:35,748 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:35] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:35,981 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:35] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:36,023 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:36,024 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:36,024 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:36,261 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:36,397 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 12:47:36,518 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:36,568 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:36] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 12:47:38,283 - INFO - 127.0.0.1 - - [21/Apr/2024 12:47:38] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:10:23,485 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 13:10:23,485 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 13:10:29,929 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:29] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:10:30,096 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,100 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,102 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,493 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,500 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,504 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,510 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,518 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:10:30,723 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:10:30,861 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:10:30,909 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:10:32,872 - INFO - 127.0.0.1 - - [21/Apr/2024 13:10:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:11:42,795 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:42] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:11:42,968 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:42] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:42,972 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:42] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:42,977 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:42] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:43,192 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:43,193 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:43,196 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:43,227 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:11:43,230 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:11:43,234 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:43,329 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:11:43,330 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:43] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:11:45,072 - INFO - 127.0.0.1 - - [21/Apr/2024 13:11:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:40,027 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:40,274 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,283 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,288 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,459 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,461 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,463 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,488 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:40,490 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:40,491 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:40,624 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:40,637 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:40] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:42,423 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 13:14:43,030 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `conversation.children`>, <Output `conversation_mem.data`>, <Output `input-text.value`>, <Output `background-info.children`>]
Path: ()
Expected length: 4
Received value of length 3:
    ['身份不对未登录用户，你输入的身份是', None, '']
werkzeug - 2024-04-21 13:14:43,053 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:43] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 13:14:44,451 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `conversation.children`>, <Output `conversation_mem.data`>, <Output `input-text.value`>, <Output `background-info.children`>]
Path: ()
Expected length: 4
Received value of length 3:
    ['身份不对未登录用户，你输入的身份是', None, '']
werkzeug - 2024-04-21 13:14:44,452 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:44] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 13:14:46,474 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:46] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:48,316 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:51,643 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:14:51,663 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:51] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:51,707 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:51] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:51,708 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:51] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:51,730 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:51] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:14:59,843 - INFO - 127.0.0.1 - - [21/Apr/2024 13:14:59] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 13:18:14,901 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 491, in update_history
    list_conversation = cm.list_active_conversations_by_user(return_json=True, user_name= user_name)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 122, in list_active_conversations_by_user
    conversations =  self.session.query(Conversation).filter(Conversation.deleted == 0, Conversation.user_name == user_name).order_by(Conversation.created_at.desc()).all()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3233, in all
    return list(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3389, in __iter__
    return self._execute_and_instances(context)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3414, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT conversation.id AS conversation_id, conversation.user_name AS conversation_user_name, conversation.conversation AS conversation_conversation, conversation.created_at AS conversation_created_at, conversation.updated_at AS conversation_updated_at, conversation.notes AS conversation_notes, conversation.deleted AS conversation_deleted, conversation.label_score AS conversation_label_score, conversation.label_text AS conversation_label_text, conversation.label_from_user AS conversation_label_from_user, conversation.label_created_at AS conversation_label_created_at 
FROM conversation 
WHERE conversation.deleted = %(deleted_1)s AND conversation.user_name = %(user_name_1)s ORDER BY conversation.created_at DESC]
[parameters: {'deleted_1': 0, 'user_name_1': '666zhitao'}]
(Background on this error at: http://sqlalche.me/e/e3q8)
manager - 2024-04-21 13:18:14,903 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 491, in update_history
    list_conversation = cm.list_active_conversations_by_user(return_json=True, user_name= user_name)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 122, in list_active_conversations_by_user
    conversations =  self.session.query(Conversation).filter(Conversation.deleted == 0, Conversation.user_name == user_name).order_by(Conversation.created_at.desc()).all()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3233, in all
    return list(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3389, in __iter__
    return self._execute_and_instances(context)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3414, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT conversation.id AS conversation_id, conversation.user_name AS conversation_user_name, conversation.conversation AS conversation_conversation, conversation.created_at AS conversation_created_at, conversation.updated_at AS conversation_updated_at, conversation.notes AS conversation_notes, conversation.deleted AS conversation_deleted, conversation.label_score AS conversation_label_score, conversation.label_text AS conversation_label_text, conversation.label_from_user AS conversation_label_from_user, conversation.label_created_at AS conversation_label_created_at 
FROM conversation 
WHERE conversation.deleted = %(deleted_1)s AND conversation.user_name = %(user_name_1)s ORDER BY conversation.created_at DESC]
[parameters: {'deleted_1': 0, 'user_name_1': '未登录用户'}]
(Background on this error at: http://sqlalche.me/e/e3q8)
manager - 2024-04-21 13:18:14,903 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 491, in update_history
    list_conversation = cm.list_active_conversations_by_user(return_json=True, user_name= user_name)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 122, in list_active_conversations_by_user
    conversations =  self.session.query(Conversation).filter(Conversation.deleted == 0, Conversation.user_name == user_name).order_by(Conversation.created_at.desc()).all()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3233, in all
    return list(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3389, in __iter__
    return self._execute_and_instances(context)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3414, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT conversation.id AS conversation_id, conversation.user_name AS conversation_user_name, conversation.conversation AS conversation_conversation, conversation.created_at AS conversation_created_at, conversation.updated_at AS conversation_updated_at, conversation.notes AS conversation_notes, conversation.deleted AS conversation_deleted, conversation.label_score AS conversation_label_score, conversation.label_text AS conversation_label_text, conversation.label_from_user AS conversation_label_from_user, conversation.label_created_at AS conversation_label_created_at 
FROM conversation 
WHERE conversation.deleted = %(deleted_1)s AND conversation.user_name = %(user_name_1)s ORDER BY conversation.created_at DESC]
[parameters: {'deleted_1': 0, 'user_name_1': '666zhitao'}]
(Background on this error at: http://sqlalche.me/e/e3q8)
manager - 2024-04-21 13:18:14,904 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1142 characters truncated) ...     "3": {\n        "content": "顾客：非常感谢你的建议，我相信你的专业眼光。期待能有一个新的发型，让我看起来更精神一些。（开心）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 5, 15, 2, 362250), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 13:18:14,919 - INFO - 127.0.0.1 - - [21/Apr/2024 13:18:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 13:18:14,920 - INFO - 127.0.0.1 - - [21/Apr/2024 13:18:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 13:18:14,921 - INFO - 127.0.0.1 - - [21/Apr/2024 13:18:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 13:18:14,994 - INFO - 127.0.0.1 - - [21/Apr/2024 13:18:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 13:53:29,734 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "conversation" does not exist
LINE 1: INSERT INTO conversation (user_name, conversation, created_a...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "conversation" does not exist
LINE 1: INSERT INTO conversation (user_name, conversation, created_a...
                    ^

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1142 characters truncated) ...     "3": {\n        "content": "顾客：非常感谢你的建议，我相信你的专业眼光。期待能有一个新的发型，让我看起来更精神一些。（开心）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 5, 53, 29, 588906), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/f405)
werkzeug - 2024-04-21 13:53:29,753 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:29] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 13:53:34,679 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:34] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:53:34,880 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:34] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:34,880 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:34] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:34,881 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:34] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:35,195 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:35,198 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:35,205 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:35,210 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:35,264 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:53:35,266 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:53:35,339 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:53:35,413 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:35] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:53:37,041 - INFO - 127.0.0.1 - - [21/Apr/2024 13:53:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:58:30,164 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 13:58:30,164 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 13:58:34,607 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 13:58:34,618 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:34] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:58:34,651 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:34] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:58:34,651 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:34] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:58:34,669 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:34] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 13:58:45,650 - INFO - 127.0.0.1 - - [21/Apr/2024 13:58:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:00:12,412 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:00:12,412 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 14:00:22,220 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 528, in update_history
    page_content.append(hist_template(item['id'], item['user_name'], item['created_at'], item['conversation']))
  File "/Users/zhitaogao/dev/yangai/app/chat_components.py", line 113, in hist_template
    content = re.sub(r"\s+", " ", content)
NameError: name 're' is not defined
werkzeug - 2024-04-21 14:00:22,236 - INFO - 127.0.0.1 - - [21/Apr/2024 14:00:22] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:00:49,639 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:00:49,639 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:00:52,370 - INFO - 127.0.0.1 - - [21/Apr/2024 14:00:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:00:52,454 - INFO - 127.0.0.1 - - [21/Apr/2024 14:00:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:44,413 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:02:44,413 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:02:51,765 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:51] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:51,909 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:51] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:51,922 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:51] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:51,927 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:51] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,272 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,289 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,293 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,295 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,300 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:52,442 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:02:52,512 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:52,542 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:54,340 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:54] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:02:56,597 - INFO - 127.0.0.1 - - [21/Apr/2024 14:02:56] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:03:02,130 - INFO - 127.0.0.1 - - [21/Apr/2024 14:03:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:03:17,306 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:03:17,307 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:03:55,934 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:03:55,934 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:04:05,339 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:05,438 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:07,068 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:07] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:04:07,095 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:07] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:04:07,097 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:07] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:04:07,152 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:07] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:04:13,382 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:16,521 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:18,072 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:18] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:20,332 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:20] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:22,830 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:28,526 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:34,899 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:40,871 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:04:47,096 - INFO - 127.0.0.1 - - [21/Apr/2024 14:04:47] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:09:02,489 - INFO - 127.0.0.1 - - [21/Apr/2024 14:09:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:09:04,519 - INFO - 127.0.0.1 - - [21/Apr/2024 14:09:04] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:09:11,197 - INFO - 127.0.0.1 - - [21/Apr/2024 14:09:11] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:09:11,287 - INFO - 127.0.0.1 - - [21/Apr/2024 14:09:11] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:13:38,080 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:13:38,080 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 14:13:45,218 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 621, in update_score_history
    page_content.append(hist_template_for_score(convid = item['id'],
  File "/Users/zhitaogao/dev/yangai/app/chat_components.py", line 162, in hist_template_for_score
    "index":"score_button_label_{}".format(hist_id),
NameError: name 'hist_id' is not defined
werkzeug - 2024-04-21 14:13:45,340 - INFO - 127.0.0.1 - - [21/Apr/2024 14:13:45] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 14:13:54,342 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 621, in update_score_history
    page_content.append(hist_template_for_score(convid = item['id'],
  File "/Users/zhitaogao/dev/yangai/app/chat_components.py", line 162, in hist_template_for_score
    "index":"score_button_label_{}".format(hist_id),
NameError: name 'hist_id' is not defined
werkzeug - 2024-04-21 14:13:54,344 - INFO - 127.0.0.1 - - [21/Apr/2024 14:13:54] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:14:13,359 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:14:13,359 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:14:16,541 - INFO - 127.0.0.1 - - [21/Apr/2024 14:14:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:14:16,554 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:14:16,557 - INFO - 127.0.0.1 - - [21/Apr/2024 14:14:16] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 204 -
werkzeug - 2024-04-21 14:14:16,561 - INFO - 127.0.0.1 - - [21/Apr/2024 14:14:16] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:15:10,417 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:15:10,418 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:16:29,286 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:16:29,287 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:20:09,907 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:20:09,907 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:20:14,217 - INFO - 127.0.0.1 - - [21/Apr/2024 14:20:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:20:14,240 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:20:14,250 - INFO - 127.0.0.1 - - [21/Apr/2024 14:20:14] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 14:35:48,557 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:35:48,564 - INFO - 127.0.0.1 - - [21/Apr/2024 14:35:48] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:36:13,550 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:13] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:36:13,826 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:13] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:13,828 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:13] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:13,831 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:13] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:14,074 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:36:14,076 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:14,080 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:36:14,100 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:14,101 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:14,107 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:14,286 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:36:14,297 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:14] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:36:16,337 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:36:17,859 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 595, in update_score_history
    list_conversation = cm.list_conversations(return_json=True)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 106, in list_conversations
    return [conversation.to_dict() for conversation in self.session.query(Conversation).all()]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3233, in all
    return list(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3389, in __iter__
    return self._execute_and_instances(context)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3414, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT conversation.id AS conversation_id, conversation.user_name AS conversation_user_name, conversation.conversation AS conversation_conversation, conversation.created_at AS conversation_created_at, conversation.updated_at AS conversation_updated_at, conversation.notes AS conversation_notes, conversation.deleted AS conversation_deleted, conversation.label_score AS conversation_label_score, conversation.label_text AS conversation_label_text, conversation.label_from_user AS conversation_label_from_user, conversation.label_created_at AS conversation_label_created_at 
FROM conversation]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 14:36:17,881 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:17] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:36:22,183 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:36:22,229 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:36:22,231 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:22] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:36:35,034 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:36:35,035 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:36:43,250 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:36:43,262 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:36:43,267 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:43] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 14:36:46,305 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 210, in validate_grouping
    SchemaTypeValidationError.check(grouping, full_schema, path, (tuple, list))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 162, in check
    raise SchemaTypeValidationError(value, full_schema, path, expected_type)
dash._grouping.SchemaTypeValidationError: Schema: [<Output `score_modal_score.is_open`>, <Output `score_modal_conversation_score.children`>]
Path: ()
Expected type: (<class 'tuple'>, <class 'list'>)
Received value of type <class 'NoneType'>:
    None
werkzeug - 2024-04-21 14:36:46,309 - INFO - 127.0.0.1 - - [21/Apr/2024 14:36:46] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:38:40,393 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:38:40,393 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:38:45,690 - INFO - 127.0.0.1 - - [21/Apr/2024 14:38:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:38:45,705 - INFO - 127.0.0.1 - - [21/Apr/2024 14:38:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:39:06,224 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:39:55,148 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:39:55,509 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:39:55,537 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:39:55,563 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:39:55,571 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:39:55,618 - INFO - 127.0.0.1 - - [21/Apr/2024 14:39:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 14:41:40,724 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:41:40,724 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:41:42,795 - INFO - 127.0.0.1 - - [21/Apr/2024 14:41:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:41:42,885 - INFO - 127.0.0.1 - - [21/Apr/2024 14:41:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:42:35,878 - INFO - 127.0.0.1 - - [21/Apr/2024 14:42:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:48:42,865 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 14:48:42,866 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 14:48:54,941 - INFO - 127.0.0.1 - - [21/Apr/2024 14:48:54] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:02,641 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:07,068 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:07] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:12,715 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:17,020 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:19,108 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:19] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:49:22,325 - INFO - 127.0.0.1 - - [21/Apr/2024 14:49:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:51:21,484 - INFO - 127.0.0.1 - - [21/Apr/2024 14:51:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:01,105 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:01] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:03,544 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:03,558 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:04,753 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:04] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:06,985 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:11,628 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:11] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:16,755 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 14:53:18,090 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 455, in update_output
    ai.chat(user_input)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 165, in chat
    res_text = self.proxy(msg, role, reponse_role)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 132, in proxy
    res_text = res['result']
KeyError: 'result'
werkzeug - 2024-04-21 14:53:18,106 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:18] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 14:53:22,738 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:31,654 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:35,181 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:37,850 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:37,861 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:42,273 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:45,770 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 14:53:45,801 - INFO - 127.0.0.1 - - [21/Apr/2024 14:53:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:00:06,994 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:00:06,994 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:00:12,055 - INFO - 127.0.0.1 - - [21/Apr/2024 15:00:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 15:00:12,069 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 650, in dynamic_score_action
    if not ctx.triggered:
NameError: name 'ctx' is not defined
werkzeug - 2024-04-21 15:00:12,078 - INFO - 127.0.0.1 - - [21/Apr/2024 15:00:12] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:00:29,431 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:00:29,431 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:01:27,081 - INFO - 127.0.0.1 - - [21/Apr/2024 15:01:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:01:27,129 - INFO - 127.0.0.1 - - [21/Apr/2024 15:01:27] "GET /ai/_dash-component-suites/feffery_antd_components/async-data_entry.v0_2_11m1699104383.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:01:27,131 - INFO - 127.0.0.1 - - [21/Apr/2024 15:01:27] "GET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:01:27,234 - INFO - 127.0.0.1 - - [21/Apr/2024 15:01:27] "GET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:03:11,490 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:03:11,490 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:03:18,714 - INFO - 127.0.0.1 - - [21/Apr/2024 15:03:18] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:03:18,730 - INFO - 127.0.0.1 - - [21/Apr/2024 15:03:18] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:03:26,777 - INFO - 127.0.0.1 - - [21/Apr/2024 15:03:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:06:43,940 - INFO - 127.0.0.1 - - [21/Apr/2024 15:06:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:10:23,774 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:10:23,774 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:10:33,024 - INFO - 127.0.0.1 - - [21/Apr/2024 15:10:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:12:03,876 - INFO - 127.0.0.1 - - [21/Apr/2024 15:12:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 15:18:12,930 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, role_info, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(role_info)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1338 characters truncated) ...        "content": "顾客：嗯，我觉得波浪卷会让我看起来更加温柔和有活力，而且也比较适合我的职业，你觉得呢？（轻轻地摇了摇头，表现出一点不确定）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 7, 12, 26, 74445), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'role_info': None, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 15:18:12,959 - INFO - 127.0.0.1 - - [21/Apr/2024 15:18:12] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:29:42,098 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,100 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,121 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,125 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,134 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,145 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,165 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,166 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 15:29:42,376 - INFO - 127.0.0.1 - - [21/Apr/2024 15:29:42] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-21 15:31:22,406 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, role_info, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(role_info)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1338 characters truncated) ...        "content": "顾客：嗯，我觉得波浪卷会让我看起来更加温柔和有活力，而且也比较适合我的职业，你觉得呢？（轻轻地摇了摇头，表现出一点不确定）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 7, 29, 46, 150233), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'role_info': None, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 15:31:22,423 - INFO - 127.0.0.1 - - [21/Apr/2024 15:31:22] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 15:31:37,751 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "role_info" of relation "conversation" does not exist
LINE 1: ...ersation, created_at, updated_at, notes, deleted, role_info,...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "role_info" of relation "conversation" does not exist
LINE 1: ...ersation, created_at, updated_at, notes, deleted, role_info,...
                                                             ^

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, role_info, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(role_info)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1338 characters truncated) ...        "content": "顾客：嗯，我觉得波浪卷会让我看起来更加温柔和有活力，而且也比较适合我的职业，你觉得呢？（轻轻地摇了摇头，表现出一点不确定）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 7, 31, 37, 600344), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'role_info': None, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/f405)
werkzeug - 2024-04-21 15:31:37,768 - INFO - 127.0.0.1 - - [21/Apr/2024 15:31:37] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 15:31:48,146 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "role_info" of relation "conversation" does not exist
LINE 1: ...ersation, created_at, updated_at, notes, deleted, role_info,...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 473, in update_output
    cm.create_conversation(user_name, conversation=conversation_json, notes = "Case: {}".format(case))
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 47, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "role_info" of relation "conversation" does not exist
LINE 1: ...ersation, created_at, updated_at, notes, deleted, role_info,...
                                                             ^

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, role_info, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(role_info)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "\\n        ```\\n        这是一个培训的模拟场景，你需要扮演一个顾客，尽量模拟真实的对话场景，\\\\\\n        1. 使用口语化的沟通方式\\n        2. 并且更频繁的使用语气词，比 ... (1338 characters truncated) ...        "content": "顾客：嗯，我觉得波浪卷会让我看起来更加温柔和有活力，而且也比较适合我的职业，你觉得呢？（轻轻地摇了摇头，表现出一点不确定）",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 7, 31, 47, 976679), 'updated_at': None, 'notes': 'Case: 1', 'deleted': 0, 'role_info': None, 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/f405)
werkzeug - 2024-04-21 15:31:48,154 - INFO - 127.0.0.1 - - [21/Apr/2024 15:31:48] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:32:39,817 - INFO - 127.0.0.1 - - [21/Apr/2024 15:32:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 15:34:25,940 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 455, in update_output
    ai.chat(user_input)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 165, in chat
    res_text = self.proxy(msg, role, reponse_role)
  File "/Users/zhitaogao/dev/yangai/ai/qianfan.py", line 132, in proxy
    res_text = res['result']
KeyError: 'result'
werkzeug - 2024-04-21 15:34:25,953 - INFO - 127.0.0.1 - - [21/Apr/2024 15:34:25] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:34:31,123 - INFO - 127.0.0.1 - - [21/Apr/2024 15:34:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:34:56,561 - INFO - 127.0.0.1 - - [21/Apr/2024 15:34:56] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:36:24,271 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:36:24,271 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:36:36,343 - INFO - 127.0.0.1 - - [21/Apr/2024 15:36:36] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 15:36:38,992 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 475, in update_output
    role_info = role_desc,
UnboundLocalError: local variable 'role_desc' referenced before assignment
werkzeug - 2024-04-21 15:36:38,997 - INFO - 127.0.0.1 - - [21/Apr/2024 15:36:38] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 15:37:10,410 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 475, in update_output
    role_info = background_info,
UnboundLocalError: local variable 'role_desc' referenced before assignment
werkzeug - 2024-04-21 15:37:10,414 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:10] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:37:18,060 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:37:18,060 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:37:23,296 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:23] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:27,970 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:27,991 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:30,895 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:33,729 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:37,992 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:37:38,027 - INFO - 127.0.0.1 - - [21/Apr/2024 15:37:38] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:48:03,208 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:48:03,208 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 15:50:14,594 - INFO - 127.0.0.1 - - [21/Apr/2024 15:50:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:50:50,260 - INFO - 127.0.0.1 - - [21/Apr/2024 15:50:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:50:55,022 - INFO - 127.0.0.1 - - [21/Apr/2024 15:50:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:52:37,505 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:52:37,506 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 15:52:40,925 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 630, in update_score_history
    role_info = item['role_info'],
KeyError: 'role_info'
werkzeug - 2024-04-21 15:52:40,933 - INFO - 127.0.0.1 - - [21/Apr/2024 15:52:40] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:56:13,499 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 15:56:13,499 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 15:56:41,604 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 630, in update_score_history
    role_info = item['role_info'],
KeyError: 'role_info'
werkzeug - 2024-04-21 15:56:41,610 - INFO - 127.0.0.1 - - [21/Apr/2024 15:56:41] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 15:56:50,416 - INFO - 127.0.0.1 - - [21/Apr/2024 15:56:50] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 15:57:43,814 - INFO - 127.0.0.1 - - [21/Apr/2024 15:57:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 15:58:47,270 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 630, in update_score_history
    role_info = item['role_info'],
KeyError: 'role_info'
werkzeug - 2024-04-21 15:58:47,273 - INFO - 127.0.0.1 - - [21/Apr/2024 15:58:47] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 16:01:26,771 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:01:26,772 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:01:31,830 - INFO - 127.0.0.1 - - [21/Apr/2024 16:01:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:10:05,825 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:10:05,825 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:10:10,750 - INFO - 127.0.0.1 - - [21/Apr/2024 16:10:10] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:01,109 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:12:01,110 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:12:06,189 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:12,308 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:12,569 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,610 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,617 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,796 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,799 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,804 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,815 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:12,816 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:12,819 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:12] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:13,079 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:13] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:12:13,083 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:12:15,786 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:15] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 16:12:17,755 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 630, in update_score_history
    role_info = item['role_info'],
KeyError: 'role_info'
werkzeug - 2024-04-21 16:12:17,766 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:17] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 16:12:23,875 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 630, in update_score_history
    role_info = item['role_info'],
KeyError: 'role_info'
werkzeug - 2024-04-21 16:12:23,894 - INFO - 127.0.0.1 - - [21/Apr/2024 16:12:23] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 16:13:44,027 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:13:44,027 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:13:51,191 - INFO - 127.0.0.1 - - [21/Apr/2024 16:13:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:13:51,216 - INFO - 127.0.0.1 - - [21/Apr/2024 16:13:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:13:54,907 - INFO - 127.0.0.1 - - [21/Apr/2024 16:13:54] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:13:54,968 - INFO - 127.0.0.1 - - [21/Apr/2024 16:13:54] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:13:55,030 - INFO - 127.0.0.1 - - [21/Apr/2024 16:13:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:14:17,058 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:14:17,058 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:14:24,365 - INFO - 127.0.0.1 - - [21/Apr/2024 16:14:24] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:14:24,388 - INFO - 127.0.0.1 - - [21/Apr/2024 16:14:24] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:14:26,545 - INFO - 127.0.0.1 - - [21/Apr/2024 16:14:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
sqlalchemy.pool.impl.QueuePool - 2024-04-21 16:28:26,823 - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 538, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

sqlalchemy.pool.impl.QueuePool - 2024-04-21 16:28:26,833 - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 538, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

werkzeug - 2024-04-21 16:28:26,841 - INFO - 127.0.0.1 - - [21/Apr/2024 16:28:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:28:26,869 - INFO - 127.0.0.1 - - [21/Apr/2024 16:28:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:28:29,351 - INFO - 127.0.0.1 - - [21/Apr/2024 16:28:29] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:28:53,840 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:28:53,841 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:29:00,145 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:00,326 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,356 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,373 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,661 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,662 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,664 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,666 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:00,686 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:00,697 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:00,804 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:00] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:12,860 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:12] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:13,065 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,067 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,090 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,295 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:13,298 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:29:13,342 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,355 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,357 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,359 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:29:13,563 - INFO - 127.0.0.1 - - [21/Apr/2024 16:29:13] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:02,659 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:30:02,660 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 16:30:07,823 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:07] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:30:07,983 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:07] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:07,988 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:07] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:07,991 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:07] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:08,255 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:30:08,261 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 16:30:08,317 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:08,486 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:08,501 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:08,501 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:30:08,501 - INFO - 127.0.0.1 - - [21/Apr/2024 16:30:08] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 16:44:53,665 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 16:44:53,666 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:09:05,609 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:05] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:09:05,719 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:05] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:05,745 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:05] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:05,752 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:05] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:06,048 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:09:06,052 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:09:06,262 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:06,263 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:06,330 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:06,334 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:09:06,337 - INFO - 127.0.0.1 - - [21/Apr/2024 17:09:06] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:47,003 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:13:47,004 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:13:50,614 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:50] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:13:50,806 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:50] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:50,807 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:50] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:50,814 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:50] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:51,045 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:13:51,059 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:13:51,071 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:51,072 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:51,074 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:51,078 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:13:51,348 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:13:51,353 - INFO - 127.0.0.1 - - [21/Apr/2024 17:13:51] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:38,540 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:14:38,540 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:14:41,391 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:14:41,566 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,570 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,584 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,839 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:14:41,845 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:14:41,857 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,860 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,870 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:41,886 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:41] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:14:42,031 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:14:42,035 - INFO - 127.0.0.1 - - [21/Apr/2024 17:14:42] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:26,333 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:20:26,333 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:20:27,638 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:27] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:20:27,836 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:27] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:27,850 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:27] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:27,857 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:27] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,191 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:20:28,234 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:20:28,460 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,462 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,468 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,473 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,475 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:20:28,482 - INFO - 127.0.0.1 - - [21/Apr/2024 17:20:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:21:16,549 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:21:16,549 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:22:59,796 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:22:59,797 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:23:01,634 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:01] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:01,763 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:01] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:01,788 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:01] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:01,824 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:01] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:02,053 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:02,056 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:02,074 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:02,075 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:02,075 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:02,082 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:02,356 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:02,360 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:02] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:06,681 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:09,488 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:23:09,509 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>]
Path: ()
Expected length: 4
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7f9d52b2a970>]
werkzeug - 2024-04-21 17:23:09,515 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:09] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:23:17,646 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:23:17,693 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:17] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:23:17,852 - INFO - 127.0.0.1 - - [21/Apr/2024 17:23:17] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:24:08,495 - INFO - 127.0.0.1 - - [21/Apr/2024 17:24:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:24:39,708 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 779, in dynamic_score_action_submit
    if sum(n_clicks_label) == 0:
NameError: name 'n_clicks_label' is not defined
werkzeug - 2024-04-21 17:24:39,714 - INFO - 127.0.0.1 - - [21/Apr/2024 17:24:39] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:29:30,052 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:29:30,053 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:29:31,687 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:31] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:31,898 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:31] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:31,908 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:31] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:31,921 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:31] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:32,191 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:32,197 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:32,212 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:32,213 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:32,222 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:32,228 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:32,392 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:32,399 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:32] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:34,265 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:37,047 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:29:37,074 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>]
Path: ()
Expected length: 5
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7fac92a889d0>]
werkzeug - 2024-04-21 17:29:37,081 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:37] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:29:40,884 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:29:40,940 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:40] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:40,957 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:40] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:29:54,085 - INFO - 127.0.0.1 - - [21/Apr/2024 17:29:54] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:41:54,188 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:41:54,189 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:42:02,528 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:02,753 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:02,781 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:02,784 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:02,967 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:02,970 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:02] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:03,339 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:03,347 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:03,358 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:03,360 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:03,364 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:03,366 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:03] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:06,112 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:12,811 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:42:12,841 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>]
Path: ()
Expected length: 5
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7f8f10be19d0>]
werkzeug - 2024-04-21 17:42:12,848 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:12] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:42:14,062 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:42:14,094 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:14] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:42:14,120 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:14] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-21 17:42:46,318 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 803, in dynamic_score_action_submit
    cm.update_conversation_score(conversation_id, conversation_score, conversation_label_text)
AttributeError: 'ConversationManager' object has no attribute 'update_conversation_score'
werkzeug - 2024-04-21 17:42:46,322 - INFO - 127.0.0.1 - - [21/Apr/2024 17:42:46] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:44:58,099 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:44:58,099 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:45:01,099 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:01,335 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,344 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,356 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,605 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:01,615 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:01,849 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,853 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:01,872 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,877 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,880 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:01,889 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:01] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:04,478 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:04] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:07,276 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:07] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:45:07,295 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>]
Path: ()
Expected length: 5
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7fcda1155af0>]
werkzeug - 2024-04-21 17:45:07,301 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:07] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:45:08,824 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:45:08,866 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:08] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:45:08,882 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:08] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-21 17:45:25,114 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 808, in dynamic_score_action_submit
    sentence_score = score_sentence[sentence_id]
IndexError: list index out of range
werkzeug - 2024-04-21 17:45:25,116 - INFO - 127.0.0.1 - - [21/Apr/2024 17:45:25] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:47:10,621 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:47:10,622 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 17:47:11,729 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:47:11,739 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:11] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 17:47:12,726 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:47:12,730 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:12] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:47:20,204 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:20] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:47:20,226 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>]
Path: ()
Expected length: 5
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7fa7ca010af0>]
werkzeug - 2024-04-21 17:47:20,229 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:20] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:47:22,150 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:47:26,669 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:47:32,549 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:47:34,907 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:47:47,728 - INFO - 127.0.0.1 - - [21/Apr/2024 17:47:47] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:48:01,553 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:48:01,556 - INFO - 127.0.0.1 - - [21/Apr/2024 17:48:01] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:50:38,833 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:50:38,834 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-21 17:50:39,990 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:50:39,994 - INFO - 127.0.0.1 - - [21/Apr/2024 17:50:39] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 17:50:41,130 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:50:41,141 - INFO - 127.0.0.1 - - [21/Apr/2024 17:50:41] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 17:50:41,868 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:50:41,874 - INFO - 127.0.0.1 - - [21/Apr/2024 17:50:41] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 17:50:42,539 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1316, in dispatch
    args_grouping = map_grouping(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in map_grouping
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 124, in <listcomp>
    return [map_grouping(fn, g) for g in grouping]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 129, in map_grouping
    return fn(grouping)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1317, in <lambda>
    lambda ind: inputs_state[ind], inputs_state_indices
IndexError: list index out of range
werkzeug - 2024-04-21 17:50:42,543 - INFO - 127.0.0.1 - - [21/Apr/2024 17:50:42] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:51:15,464 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:51:15,465 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:51:16,361 - INFO - 127.0.0.1 - - [21/Apr/2024 17:51:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:51:16,376 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>]
Path: ()
Expected length: 5
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7fa708d2caf0>]
werkzeug - 2024-04-21 17:51:16,379 - INFO - 127.0.0.1 - - [21/Apr/2024 17:51:16] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:51:17,550 - INFO - 127.0.0.1 - - [21/Apr/2024 17:51:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:56:13,435 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 810, in dynamic_score_action_submit
    # update score of conversation
IndexError: list index out of range
werkzeug - 2024-04-21 17:56:13,440 - INFO - 127.0.0.1 - - [21/Apr/2024 17:56:13] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 17:56:13,470 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 810, in dynamic_score_action_submit
    # update score of conversation
IndexError: list index out of range
werkzeug - 2024-04-21 17:56:13,472 - INFO - 127.0.0.1 - - [21/Apr/2024 17:56:13] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:57:22,688 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:57:22,688 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:57:27,216 - INFO - 127.0.0.1 - - [21/Apr/2024 17:57:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:57:27,244 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1295, in dispatch
    cb = self.callback_map[output]
KeyError: '..score_modal.is_open...score_modal_conversation_score.value...score_modal_conversation_label_text.value...score_modal_content.children...score_modal_conversation_id.data..'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1347, in dispatch
    raise KeyError(msg) from missing_callback_function
KeyError: "Callback function not found for output '..score_modal.is_open...score_modal_conversation_score.value...score_modal_conversation_label_text.value...score_modal_content.children...score_modal_conversation_id.data..', perhaps you forgot to prepend the '@'?"
werkzeug - 2024-04-21 17:57:27,254 - INFO - 127.0.0.1 - - [21/Apr/2024 17:57:27] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:58:30,721 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:58:30,721 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:58:34,416 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:58:34,636 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:34,639 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:34,643 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:34,945 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:58:34,967 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:34] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:58:35,073 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:35,136 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:58:35,253 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:35,257 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:35,259 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:35,260 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:35] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:58:37,176 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:58:40,455 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 17:58:40,473 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 465, in add_context
    flat_output_values = flatten_grouping(output_value, output)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 35, in flatten_grouping
    validate_grouping(grouping, schema)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 211, in validate_grouping
    SchemaLengthValidationError.check(grouping, full_schema, path, len(schema))
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_grouping.py", line 180, in check
    raise SchemaLengthValidationError(value, full_schema, path, expected_len)
dash._grouping.SchemaLengthValidationError: Schema: [<Output `score_modal.is_open`>, <Output `score_modal_conversation_score.value`>, <Output `score_modal_conversation_label_text.value`>, <Output `score_modal_content.children`>, <Output `score_modal_conversation_id.data`>, <Output `score_modal_sentence_id.data`>]
Path: ()
Expected length: 6
Received value of length 2:
    [False, <dash._callback.NoUpdate object at 0x7f7b9a439b50>]
werkzeug - 2024-04-21 17:58:40,479 - INFO - 127.0.0.1 - - [21/Apr/2024 17:58:40] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 17:59:34,822 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 17:59:34,823 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 17:59:37,092 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:37,292 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,299 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,305 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,512 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:37,515 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:37,738 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:37,751 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,771 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,771 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,773 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:37,775 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:37] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:38,922 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:38] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:41,357 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:43,453 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:45,256 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:45,368 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:48,253 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:48,292 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:48] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:48,349 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:48] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 17:59:52,377 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 17:59:52,421 - INFO - 127.0.0.1 - - [21/Apr/2024 17:59:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:01,866 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:01] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:06,839 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:06,856 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:08,081 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:09,198 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:09,662 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:09,956 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:13,998 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:13] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:14,069 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,092 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,098 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,418 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:14,411 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:14,517 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,564 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:14,654 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,656 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,669 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:14,670 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:14] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:16,693 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:19,405 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:19] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:19,445 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:19] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:22,092 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:22,117 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:22] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:22,139 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:22] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:22,148 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:22] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:22,272 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:22] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:29,757 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:29] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:39,418 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:39,440 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:41,475 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:41,506 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:43,843 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:43,871 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:46,299 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:46] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:00:46,335 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:46] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:00:46,369 - INFO - 127.0.0.1 - - [21/Apr/2024 18:00:46] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-21 18:02:09,804 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 816, in dynamic_score_action_submit
    sentence_score = score_sentence[idx]
NameError: name 'sentence_id' is not defined
werkzeug - 2024-04-21 18:02:09,814 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:09] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 18:02:17,559 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 18:02:17,559 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 18:02:33,030 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:02:40,449 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:02:40,468 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:02:41,966 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:02:44,099 - INFO - 127.0.0.1 - - [21/Apr/2024 18:02:44] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:04:25,394 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 18:04:25,394 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 18:05:14,245 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 18:05:14,245 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 18:05:21,536 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:32,766 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:32] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:38,262 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:38] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:40,573 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:48,921 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:51,613 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:51,640 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:52,885 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:05:55,903 - INFO - 127.0.0.1 - - [21/Apr/2024 18:05:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:05,445 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:09,090 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:09,265 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,275 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,292 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,657 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:09,714 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:09,747 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,863 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:09,913 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,918 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,923 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:09,923 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:09] "[36mGET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:11,830 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:11] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:13,857 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:13,874 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:13] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:16,255 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:16,280 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:16] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:16,310 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:16] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:24,612 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:24] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:26,491 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:28,668 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:31,008 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:34,249 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:36,094 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:36] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:36,118 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:36] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:37,387 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:40,659 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:40] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:59,668 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:59] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:06:59,691 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:59] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:59,719 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:59] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:59,719 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:59] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:06:59,769 - INFO - 127.0.0.1 - - [21/Apr/2024 18:06:59] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 18:25:27,291 - INFO - 127.0.0.1 - - [21/Apr/2024 18:25:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 18:25:50,426 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 50, in create_conversation
    self.session.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1036, in commit
    self.transaction.commit()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 503, in commit
    self._prepare_impl()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 482, in _prepare_impl
    self.session.flush()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2479, in flush
    self._flush(objects)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2617, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 153, in reraise
    raise value
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2577, in _flush
    flush_context.execute()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 422, in execute
    rec.execute(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/unitofwork.py", line 586, in execute
    persistence.save_obj(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 239, in save_obj
    _emit_insert_statements(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/persistence.py", line 1136, in _emit_insert_statements
    result = cached_connections[connection].execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: INSERT INTO conversation (user_name, conversation, created_at, updated_at, notes, deleted, role_info, label_score, label_text, label_from_user, label_created_at) VALUES (%(user_name)s, %(conversation)s, %(created_at)s, %(updated_at)s, %(notes)s, %(deleted)s, %(role_info)s, %(label_score)s, %(label_text)s, %(label_from_user)s, %(label_created_at)s) RETURNING conversation.id]
[parameters: {'user_name': '666zhitao', 'conversation': '{\n    "0": {\n        "content": "测试prompt测试prompt",\n        "reference": null,\n        "role": "user"\n    },\n    "1": {\n        "content": "\\ ... (1012 characters truncated) ... enter your name:\\" could be a prompt in a form asking for personal information.",\n        "reference": null,\n        "role": "assistant"\n    }\n}', 'created_at': datetime.datetime(2024, 4, 21, 10, 25, 50, 416646), 'updated_at': None, 'notes': 'Case: 2', 'deleted': 0, 'role_info': '测试role_desc', 'label_score': None, 'label_text': None, 'label_from_user': None, 'label_created_at': None}]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 18:25:50,442 - INFO - 127.0.0.1 - - [21/Apr/2024 18:25:50] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 18:26:31,899 - INFO - 127.0.0.1 - - [21/Apr/2024 18:26:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:26:47,128 - INFO - 127.0.0.1 - - [21/Apr/2024 18:26:47] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 18:32:21,698 - INFO - 127.0.0.1 - - [21/Apr/2024 18:32:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:04,934 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:04] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,104 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,124 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "GET /ai/_dash-component-suites/feffery_antd_components/feffery_antd_components.v0_2_11m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,134 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,147 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:44:05,153 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:44:05,183 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:44:05,404 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,409 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,613 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:05,688 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:05] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:44:08,588 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:15,224 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:15] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:44:15,261 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:15] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:44:15,288 - INFO - 127.0.0.1 - - [21/Apr/2024 21:44:15] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
manager - 2024-04-21 21:53:23,617 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 439, in update_output
    system_prompt = get_system_prompt(case = case)
  File "/Users/zhitaogao/dev/yangai/ai/make_prompt.py", line 40, in get_system_prompt
    pm = PromptManager(engine = get_engine())
  File "/Users/zhitaogao/dev/yangai/ai/prompt.py", line 8, in __init__
    self.Session = sessionmaker(bind=self.engine)
NameError: name 'sessionmaker' is not defined
werkzeug - 2024-04-21 21:53:23,635 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:23] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:53:25,513 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 439, in update_output
    system_prompt = get_system_prompt(case = case)
  File "/Users/zhitaogao/dev/yangai/ai/make_prompt.py", line 40, in get_system_prompt
    pm = PromptManager(engine = get_engine())
  File "/Users/zhitaogao/dev/yangai/ai/prompt.py", line 8, in __init__
    self.Session = sessionmaker(bind=self.engine)
NameError: name 'sessionmaker' is not defined
werkzeug - 2024-04-21 21:53:25,538 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:25] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 21:53:36,597 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:36] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:36,821 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:36] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:36,826 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:36] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:36,844 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:36] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:37,089 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:37] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:37,091 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:37] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:37,221 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:37] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:37,232 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:37] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:39,564 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:44,211 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:44] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:53:44,234 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:44] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:44,260 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:44] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:53:52,784 - INFO - 127.0.0.1 - - [21/Apr/2024 21:53:52] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:05,499 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:10,981 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:10] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:16,610 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:30,957 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 21:54:33,083 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77e06b29d0>' is already attached to session '21' (this is '22')
werkzeug - 2024-04-21 21:54:33,085 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:33] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:54:40,196 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c97300d0>' is already attached to session '21' (this is '23')
werkzeug - 2024-04-21 21:54:40,199 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:40] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 21:54:43,636 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:43] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:56,105 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:56] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:54:56,136 - INFO - 127.0.0.1 - - [21/Apr/2024 21:54:56] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:05,213 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:12,700 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:12] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 21:55:15,505 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 581, in dynamic_history_action
    conversation_details = cm.get_sentence_by_conversation(conversation_id, return_json=True)
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 76, in get_sentence_by_conversation
    sentences = self.session.query(Sentence).filter(Sentence.conversation_id == conversation_id).all()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3233, in all
    return list(self)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3389, in __iter__
    return self._execute_and_instances(context)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3414, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 982, in execute
    return meth(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1095, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
    self._handle_dbapi_exception(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1245, in _execute_context
    self.dialect.do_execute(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT sentence.id AS sentence_id, sentence.from_user AS sentence_from_user, sentence.to_user AS sentence_to_user, sentence.text AS sentence_text, sentence.type AS sentence_type, sentence.model AS sentence_model, sentence.created AS sentence_created, sentence.notes AS sentence_notes, sentence.conversation_id AS sentence_conversation_id, sentence.label_score AS sentence_label_score, sentence.label_text AS sentence_label_text, sentence.label_from_user AS sentence_label_from_user, sentence.label_created_at AS sentence_label_created_at 
FROM sentence 
WHERE sentence.conversation_id = %(conversation_id_1)s]
[parameters: {'conversation_id_1': 6}]
(Background on this error at: http://sqlalche.me/e/e3q8)
werkzeug - 2024-04-21 21:55:15,512 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:15] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 21:55:17,871 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:20,378 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:20] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:23,127 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:23] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:26,923 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:31,380 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:42,520 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:42,538 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:51,051 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:53,604 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:53] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:55:53,630 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:53] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:55:56,790 - INFO - 127.0.0.1 - - [21/Apr/2024 21:55:56] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:31,061 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:31] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:41,257 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:41] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:44,376 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:44] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:49,859 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:49] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:54,229 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:54] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:56:58,477 - INFO - 127.0.0.1 - - [21/Apr/2024 21:56:58] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:57:21,613 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 21:57:50,567 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dcc310>' is already attached to session '24' (this is '41')
werkzeug - 2024-04-21 21:57:50,571 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:50] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:55,614 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77e06cc9d0>' is already attached to session '24' (this is '42')
werkzeug - 2024-04-21 21:57:55,616 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:55] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:56,153 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77e06bfdf0>' is already attached to session '24' (this is '43')
werkzeug - 2024-04-21 21:57:56,155 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:56] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:56,596 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0df4880>' is already attached to session '24' (this is '44')
werkzeug - 2024-04-21 21:57:56,598 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:56] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:57,008 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0df4070>' is already attached to session '24' (this is '45')
werkzeug - 2024-04-21 21:57:57,010 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:57] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:57,400 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77e06cc2b0>' is already attached to session '24' (this is '46')
werkzeug - 2024-04-21 21:57:57,401 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:57] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:57,781 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dbcc70>' is already attached to session '24' (this is '47')
werkzeug - 2024-04-21 21:57:57,782 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:57] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:57,906 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dccf40>' is already attached to session '24' (this is '48')
werkzeug - 2024-04-21 21:57:57,908 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:57] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:58,199 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dccb80>' is already attached to session '24' (this is '49')
werkzeug - 2024-04-21 21:57:58,201 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:58] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:58,342 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c973f490>' is already attached to session '24' (this is '50')
werkzeug - 2024-04-21 21:57:58,344 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:58] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:58,485 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dc00d0>' is already attached to session '24' (this is '51')
werkzeug - 2024-04-21 21:57:58,487 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:58] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:57:59,729 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dcc730>' is already attached to session '24' (this is '52')
werkzeug - 2024-04-21 21:57:59,730 - INFO - 127.0.0.1 - - [21/Apr/2024 21:57:59] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 21:58:03,446 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:08,765 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
manager - 2024-04-21 21:58:17,701 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dc0160>' is already attached to session '24' (this is '53')
werkzeug - 2024-04-21 21:58:17,705 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:17] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:58:21,467 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0ddfd30>' is already attached to session '24' (this is '54')
werkzeug - 2024-04-21 21:58:21,469 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:21] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-21 21:58:24,556 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0dd2940>' is already attached to session '24' (this is '55')
werkzeug - 2024-04-21 21:58:24,558 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:24] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 21:58:27,565 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:27,582 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:37,621 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:58:37,622 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:58:37,893 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:37,895 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "GET /ai/_dash-component-suites/dash/html/dash_html_components.min.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:37,896 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:58:37,955 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js.map HTTP/1.1" 200 -
werkzeug - 2024-04-21 21:58:37,958 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:58:37,986 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/_dash-component-suites/dash/dash_table/bundle.js.map HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 21:58:37,990 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:37] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js.map HTTP/1.1[0m" 304 -
manager - 2024-04-21 21:58:51,853 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1352, in dispatch
    ctx.run(
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 450, in add_context
    output_value = _invoke_callback(func, *func_args, **func_kwargs)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/_callback.py", line 39, in _invoke_callback
    return func(*args, **kwargs)  # %% callback invoked %%
  File "/Users/zhitaogao/dev/yangai/app/chat_basic.py", line 485, in update_output
    cm.create_conversation(user_name,
  File "/Users/zhitaogao/dev/yangai/ai/conversation.py", line 49, in create_conversation
    self.session.add(new_conversation)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1968, in add
    self._save_or_update_state(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1981, in _save_or_update_state
    self._save_or_update_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2329, in _save_or_update_impl
    self._save_impl(state)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2282, in _save_impl
    to_attach = self._before_attach(state, obj)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2399, in _before_attach
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Object '<Conversation at 0x7f77c0deba00>' is already attached to session '24' (this is '57')
werkzeug - 2024-04-21 21:58:51,857 - INFO - 127.0.0.1 - - [21/Apr/2024 21:58:51] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-21 22:07:36,372 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 22:07:36,373 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 22:07:39,382 - INFO - 127.0.0.1 - - [21/Apr/2024 22:07:39] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-21 22:08:00,336 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:00] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-21 22:08:03,166 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:08:03,187 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:08:03,189 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:08:03,313 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:08:03,395 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:08:03,396 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:08:03,599 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:03] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:08:06,216 - INFO - 127.0.0.1 - - [21/Apr/2024 22:08:06] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:44,382 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 22:16:44,383 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 22:16:45,032 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:45,083 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:16:45,088 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:16:45,091 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:16:45,542 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:45,551 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:45,557 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:16:45,762 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:48,042 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:55,863 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:16:55,890 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:16:55,958 - INFO - 127.0.0.1 - - [21/Apr/2024 22:16:55] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:17:17,485 - INFO - 127.0.0.1 - - [21/Apr/2024 22:17:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:17:25,242 - INFO - 127.0.0.1 - - [21/Apr/2024 22:17:25] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:18:57,054 - INFO - 127.0.0.1 - - [21/Apr/2024 22:18:57] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:22:52,327 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 22:22:52,327 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 22:23:05,162 - INFO - 127.0.0.1 - - [21/Apr/2024 22:23:05] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:23:15,504 - INFO - 127.0.0.1 - - [21/Apr/2024 22:23:15] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:23:35,337 - INFO - 127.0.0.1 - - [21/Apr/2024 22:23:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:23:42,165 - INFO - 127.0.0.1 - - [21/Apr/2024 22:23:42] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:23:59,065 - INFO - 127.0.0.1 - - [21/Apr/2024 22:23:59] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:17,320 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:21,790 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:21,804 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:21] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:24,625 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:24] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:29,566 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:29] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:29,586 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:29] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:30,944 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:30,967 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:30] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:24:35,897 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:53,081 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:53] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:55,518 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:24:55,531 - INFO - 127.0.0.1 - - [21/Apr/2024 22:24:55] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:31:46,033 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-21 22:31:46,033 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-21 22:31:46,251 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:31:46,302 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:31:46,302 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:31:46,303 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:31:46,532 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:31:46,534 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:31:46,701 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:31:46,707 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:46] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:31:48,615 - INFO - 127.0.0.1 - - [21/Apr/2024 22:31:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:32:00,112 - INFO - 127.0.0.1 - - [21/Apr/2024 22:32:00] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-21 22:32:00,137 - INFO - 127.0.0.1 - - [21/Apr/2024 22:32:00] "[36mGET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-21 22:32:00,171 - INFO - 127.0.0.1 - - [21/Apr/2024 22:32:00] "[36mGET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:43:31,278 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-25 17:43:31,279 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-04-25 17:43:33,142 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:33] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-04-25 17:43:37,704 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,758 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:43:37,758 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,792 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_16_1m1713672115.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,799 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,822 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,827 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/feffery_antd_components/feffery_antd_components.v0_2_11m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,834 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:43:37,855 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_16_1m1713672114.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,861 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:43:37,872 - INFO - 127.0.0.1 - - [25/Apr/2024 17:43:37] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_17m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:44:17,307 - INFO - 127.0.0.1 - - [25/Apr/2024 17:44:17] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:44:17,314 - INFO - 127.0.0.1 - - [25/Apr/2024 17:44:17] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:44:17,541 - INFO - 127.0.0.1 - - [25/Apr/2024 17:44:17] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:22,163 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:25,637 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:25] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:25,730 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:25] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:45:25,731 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:25] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:45:25,752 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:25] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:45:26,823 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:26] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:26,839 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:26] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:26,842 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:26] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:45:26,918 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:26] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:28,905 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:33,129 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:33,165 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:34,777 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:34] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:34,820 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:34] "GET /ai/_dash-component-suites/feffery_antd_components/async-data_entry.v0_2_11m1699104383.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:34,824 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:34] "GET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:45:39,836 - INFO - 127.0.0.1 - - [25/Apr/2024 17:45:39] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:41,959 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-04-25 17:46:41,959 - INFO - [33mPress CTRL+C to quit[0m
manager - 2024-04-25 17:46:44,160 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1295, in dispatch
    cb = self.callback_map[output]
KeyError: 'score_mem.data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1347, in dispatch
    raise KeyError(msg) from missing_callback_function
KeyError: "Callback function not found for output 'score_mem.data', perhaps you forgot to prepend the '@'?"
werkzeug - 2024-04-25 17:46:44,165 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:44] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
manager - 2024-04-25 17:46:44,941 - ERROR - Exception on /ai/_dash-update-component [POST]
Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1295, in dispatch
    cb = self.callback_map[output]
KeyError: 'score_mem.data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/Users/zhitaogao/opt/anaconda3/envs/bbd/lib/python3.8/site-packages/dash/dash.py", line 1347, in dispatch
    raise KeyError(msg) from missing_callback_function
KeyError: "Callback function not found for output 'score_mem.data', perhaps you forgot to prepend the '@'?"
werkzeug - 2024-04-25 17:46:44,946 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:44] "[35m[1mPOST /ai/_dash-update-component HTTP/1.1[0m" 500 -
werkzeug - 2024-04-25 17:46:45,902 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:45] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:46,069 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "[36mGET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:46:46,074 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "[36mGET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:46:46,119 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "[36mGET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:46:46,208 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:46,211 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:46,273 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "[36mGET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:46:46,277 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:46] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:48,493 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:48] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:51,668 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:51,705 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:53,286 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:53] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:46:53,315 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:53] "[36mGET /ai/_dash-component-suites/dash/dcc/async-dropdown.js HTTP/1.1[0m" 304 -
werkzeug - 2024-04-25 17:46:58,356 - INFO - 127.0.0.1 - - [25/Apr/2024 17:46:58] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-04-25 17:47:08,725 - INFO - 127.0.0.1 - - [25/Apr/2024 17:47:08] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-06-03 22:45:17,011 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-06-03 22:45:17,011 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-06-06 23:45:35,489 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-06-06 23:45:35,490 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-07-20 11:41:27,431 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-07-20 11:41:27,432 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-07-20 11:45:17,248 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:17] "[33mGET / HTTP/1.1[0m" 404 -
werkzeug - 2024-07-20 11:45:18,103 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
werkzeug - 2024-07-20 11:45:22,736 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/ HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,789 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/assets/stylesheet.css?m=1633600237.0 HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,789 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/assets/stylesheet_tailwind.css?m=1710163154.029169 HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,797 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_16_1m1713672115.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,801 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,804 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,808 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/prop-types@15.v2_16_1m1713672115.8.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,821 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,830 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/feffery_antd_components/feffery_antd_components.v0_2_11m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,848 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,857 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_16_1m1713672114.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,870 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,871 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,876 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/react@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,884 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/html/dash_html_components.v2_0_17m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,888 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/prop-types@15.v2_16_1m1713672115.8.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,896 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/react-dom@16.v2_16_1m1713672115.14.0.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,898 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/deps/polyfill@7.v2_16_1m1713672115.12.1.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,900 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash_bootstrap_components/_components/dash_bootstrap_components.v0_10_7m1674656189.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,904 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dash_table/bundle.v5_2_10m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,913 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/feffery_antd_components/feffery_antd_components.v0_2_11m1713672115.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,930 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dash-renderer/build/dash_renderer.v2_16_1m1713672114.min.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,931 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/assets/tailwind.config.js?m=1710162944.0514288 HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,937 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:22,939 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:22] "GET /ai/_dash-component-suites/dash/dcc/dash_core_components-shared.v2_13_1m1713672114.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:28,272 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:28] "GET /ai/_dash-layout HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:28,276 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:28] "GET /ai/_dash-dependencies HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:28,568 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:28] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:28,583 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:28] "GET /ai/assets/favicon.ico?m=1712410497.442126 HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:33,008 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:33] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:36,405 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:36] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:36,418 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:36] "GET /ai/_dash-component-suites/dash/dcc/async-markdown.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:36,449 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:36] "GET /ai/_dash-component-suites/dash/dcc/async-highlight.js HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:45:44,043 - INFO - 127.0.0.1 - - [20/Jul/2024 11:45:44] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:50:30,521 - INFO - 127.0.0.1 - - [20/Jul/2024 11:50:30] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:51:16,904 - INFO - 127.0.0.1 - - [20/Jul/2024 11:51:16] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:51:22,145 - INFO - 127.0.0.1 - - [20/Jul/2024 11:51:22] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:51:27,208 - INFO - 127.0.0.1 - - [20/Jul/2024 11:51:27] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:52:53,363 - INFO - 127.0.0.1 - - [20/Jul/2024 11:52:53] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 11:53:02,798 - INFO - 127.0.0.1 - - [20/Jul/2024 11:53:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:08:39,591 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8050
werkzeug - 2024-07-20 12:08:39,592 - INFO - [33mPress CTRL+C to quit[0m
werkzeug - 2024-07-20 12:08:45,585 - INFO - 127.0.0.1 - - [20/Jul/2024 12:08:45] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:08:51,173 - INFO - 127.0.0.1 - - [20/Jul/2024 12:08:51] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:09:58,621 - INFO - 127.0.0.1 - - [20/Jul/2024 12:09:58] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:10:02,449 - INFO - 127.0.0.1 - - [20/Jul/2024 12:10:02] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:10:07,871 - INFO - 127.0.0.1 - - [20/Jul/2024 12:10:07] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:11:35,851 - INFO - 127.0.0.1 - - [20/Jul/2024 12:11:35] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:57:57,327 - INFO - 127.0.0.1 - - [20/Jul/2024 12:57:57] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:57:58,740 - INFO - 127.0.0.1 - - [20/Jul/2024 12:57:58] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:58:00,749 - INFO - 127.0.0.1 - - [20/Jul/2024 12:58:00] "POST /ai/_dash-update-component HTTP/1.1" 200 -
werkzeug - 2024-07-20 12:58:09,462 - INFO - 127.0.0.1 - - [20/Jul/2024 12:58:09] "POST /ai/_dash-update-component HTTP/1.1" 200 -
